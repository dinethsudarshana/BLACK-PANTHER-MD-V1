function Jsl_0x66bb(){const _0xe03a75=['libwebp','404AwaFmo','-an','writeUIntLE','-vsync','load','error','join','categories','addOutputOptions','exif','Image','writeFileSync','../config','crypto','.webp','2540532yIZwsh','save','fluent-ffmpeg','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','packname','-vf','from','readUIntLE','333057DSKeko','.mp4','readFileSync','5bDeTgY','-preset','-loop','3373680QmTqHE','-vcodec','node-webpmux','stringify','unlinkSync','toString','3336336LxovkY','end','utf-8','concat','2162279nzGboa','toFormat','path','webp','https://github.com/Afx-Abu/Abu-MD','default','582712sYlKsG','randomBytes','author','4518EZLNlq','length'];Jsl_0x66bb=function(){return _0xe03a75;};return Jsl_0x66bb();}const Jsl_0x5a25dd=Jsl_0x1fd3;function Jsl_0x1fd3(_0x27d679,_0x151a5d){const _0x66bb58=Jsl_0x66bb();return Jsl_0x1fd3=function(_0x1fd349,_0x10344a){_0x1fd349=_0x1fd349-0x95;let _0x3bf85d=_0x66bb58[_0x1fd349];return _0x3bf85d;},Jsl_0x1fd3(_0x27d679,_0x151a5d);}(function(_0x2ed418,_0x1d6fd2){const _0xded572=Jsl_0x1fd3,_0x34332c=_0x2ed418();while(!![]){try{const _0x5925cb=parseInt(_0xded572(0xa8))/0x1+parseInt(_0xded572(0xbe))/0x2+parseInt(_0xded572(0xc1))/0x3*(parseInt(_0xded572(0xc4))/0x4)+parseInt(_0xded572(0xab))/0x5*(parseInt(_0xded572(0xa0))/0x6)+parseInt(_0xded572(0xb8))/0x7+-parseInt(_0xded572(0xae))/0x8+-parseInt(_0xded572(0xb4))/0x9;if(_0x5925cb===_0x1d6fd2)break;else _0x34332c['push'](_0x34332c['shift']());}catch(_0x4ecfd0){_0x34332c['push'](_0x34332c['shift']());}}}(Jsl_0x66bb,0xaee88));const fs=require('fs'),config=require(Jsl_0x5a25dd(0x9d)),{tmpdir}=require('os'),Crypto=require(Jsl_0x5a25dd(0x9e)),ff=require(Jsl_0x5a25dd(0xa2)),webp=require(Jsl_0x5a25dd(0xb0)),path=require(Jsl_0x5a25dd(0xba));async function imageToWebp(_0x5e7c42){const _0x413a83=Jsl_0x5a25dd,_0xa81fb7=path[_0x413a83(0x97)](tmpdir(),Crypto[_0x413a83(0xbf)](0x6)[_0x413a83(0xa7)](0x0,0x6)[_0x413a83(0xb3)](0x24)+_0x413a83(0x9f)),_0x301a8c=path[_0x413a83(0x97)](tmpdir(),Crypto[_0x413a83(0xbf)](0x6)[_0x413a83(0xa7)](0x0,0x6)['toString'](0x24)+'.jpg');fs['writeFileSync'](_0x301a8c,_0x5e7c42),await new Promise((_0x1a0666,_0x4c7feb)=>{const _0x288c45=_0x413a83;ff(_0x301a8c)['on'](_0x288c45(0x96),_0x4c7feb)['on']('end',()=>_0x1a0666(!![]))[_0x288c45(0x99)]([_0x288c45(0xaf),_0x288c45(0xc3),_0x288c45(0xa5),_0x288c45(0xa3)])[_0x288c45(0xb9)](_0x288c45(0xbb))[_0x288c45(0xa1)](_0xa81fb7);});const _0x31043b=fs['readFileSync'](_0xa81fb7);return fs[_0x413a83(0xb2)](_0xa81fb7),fs[_0x413a83(0xb2)](_0x301a8c),_0x31043b;}async function videoToWebp(_0x56f245){const _0x51f8bd=Jsl_0x5a25dd,_0x2b8dce=path[_0x51f8bd(0x97)](tmpdir(),Crypto[_0x51f8bd(0xbf)](0x6)['readUIntLE'](0x0,0x6)[_0x51f8bd(0xb3)](0x24)+_0x51f8bd(0x9f)),_0x4b4d7e=path[_0x51f8bd(0x97)](tmpdir(),Crypto[_0x51f8bd(0xbf)](0x6)[_0x51f8bd(0xa7)](0x0,0x6)['toString'](0x24)+_0x51f8bd(0xa9));fs[_0x51f8bd(0x9c)](_0x4b4d7e,_0x56f245),await new Promise((_0x502c1f,_0x184036)=>{const _0x158225=_0x51f8bd;ff(_0x4b4d7e)['on'](_0x158225(0x96),_0x184036)['on'](_0x158225(0xb5),()=>_0x502c1f(!![]))[_0x158225(0x99)]([_0x158225(0xaf),_0x158225(0xc3),_0x158225(0xa5),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',_0x158225(0xad),'0','-ss','00:00:00','-t','00:00:05',_0x158225(0xac),_0x158225(0xbd),_0x158225(0xc5),_0x158225(0xc7),'0'])[_0x158225(0xb9)](_0x158225(0xbb))['save'](_0x2b8dce);});const _0x1ef455=fs[_0x51f8bd(0xaa)](_0x2b8dce);return fs[_0x51f8bd(0xb2)](_0x2b8dce),fs[_0x51f8bd(0xb2)](_0x4b4d7e),_0x1ef455;}async function writeExifImg(_0x9fd509,_0x1dc8ef){const _0x202572=Jsl_0x5a25dd;let _0x3ecf91=await imageToWebp(_0x9fd509);const _0x55ea32=path[_0x202572(0x97)](tmpdir(),Crypto[_0x202572(0xbf)](0x6)[_0x202572(0xa7)](0x0,0x6)['toString'](0x24)+_0x202572(0x9f)),_0x1e5e6e=path[_0x202572(0x97)](tmpdir(),Crypto[_0x202572(0xbf)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x202572(0x9f));fs['writeFileSync'](_0x55ea32,_0x3ecf91);if(_0x1dc8ef[_0x202572(0xa4)]||_0x1dc8ef['author']){const _0xc3c7e5=new webp[(_0x202572(0x9b))](),_0x46fa85={'sticker-pack-id':'https://github.com/Afx-Abu/Abu-MD','sticker-pack-name':_0x1dc8ef['packname'],'sticker-pack-publisher':_0x1dc8ef[_0x202572(0xc0)],'emojis':_0x1dc8ef[_0x202572(0x98)]?_0x1dc8ef[_0x202572(0x98)]:['']},_0x2aaba5=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1cfd3c=Buffer[_0x202572(0xa6)](JSON['stringify'](_0x46fa85),_0x202572(0xb6)),_0x498f25=Buffer[_0x202572(0xb7)]([_0x2aaba5,_0x1cfd3c]);return _0x498f25['writeUIntLE'](_0x1cfd3c[_0x202572(0xc2)],0xe,0x4),await _0xc3c7e5[_0x202572(0x95)](_0x55ea32),fs[_0x202572(0xb2)](_0x55ea32),_0xc3c7e5[_0x202572(0x9a)]=_0x498f25,await _0xc3c7e5[_0x202572(0xa1)](_0x1e5e6e),_0x1e5e6e;}}async function writeExifVid(_0x51a6bc,_0xbae4b6){const _0x5d8918=Jsl_0x5a25dd;let _0x25a806=await videoToWebp(_0x51a6bc);const _0x557929=path[_0x5d8918(0x97)](tmpdir(),Crypto[_0x5d8918(0xbf)](0x6)[_0x5d8918(0xa7)](0x0,0x6)[_0x5d8918(0xb3)](0x24)+'.webp'),_0xa022c3=path[_0x5d8918(0x97)](tmpdir(),Crypto[_0x5d8918(0xbf)](0x6)[_0x5d8918(0xa7)](0x0,0x6)[_0x5d8918(0xb3)](0x24)+_0x5d8918(0x9f));fs['writeFileSync'](_0x557929,_0x25a806);if(_0xbae4b6[_0x5d8918(0xa4)]||_0xbae4b6[_0x5d8918(0xc0)]){const _0xcee59=new webp[(_0x5d8918(0x9b))](),_0x37c00a={'sticker-pack-id':'https://github.com/Afx-Abu/Abu-MD','sticker-pack-name':_0xbae4b6['packname'],'sticker-pack-publisher':_0xbae4b6[_0x5d8918(0xc0)],'emojis':_0xbae4b6['categories']?_0xbae4b6[_0x5d8918(0x98)]:['']},_0x14d23e=Buffer[_0x5d8918(0xa6)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5b665b=Buffer[_0x5d8918(0xa6)](JSON['stringify'](_0x37c00a),'utf-8'),_0x2bf70b=Buffer['concat']([_0x14d23e,_0x5b665b]);return _0x2bf70b['writeUIntLE'](_0x5b665b[_0x5d8918(0xc2)],0xe,0x4),await _0xcee59['load'](_0x557929),fs['unlinkSync'](_0x557929),_0xcee59[_0x5d8918(0x9a)]=_0x2bf70b,await _0xcee59['save'](_0xa022c3),_0xa022c3;}}async function writeExifWebp(_0x2a7f06,_0x599db3){const _0x316df7=Jsl_0x5a25dd,_0x2ad785=path[_0x316df7(0x97)](tmpdir(),Crypto['randomBytes'](0x6)[_0x316df7(0xa7)](0x0,0x6)['toString'](0x24)+_0x316df7(0x9f)),_0x4d3f7f=path[_0x316df7(0x97)](tmpdir(),Crypto[_0x316df7(0xbf)](0x6)[_0x316df7(0xa7)](0x0,0x6)[_0x316df7(0xb3)](0x24)+_0x316df7(0x9f));fs[_0x316df7(0x9c)](_0x2ad785,_0x2a7f06);if(_0x599db3['packname']||_0x599db3[_0x316df7(0xc0)]){const _0xd09eea=new webp['Image'](),_0x3acf78={'sticker-pack-id':_0x316df7(0xbc),'sticker-pack-name':_0x599db3[_0x316df7(0xa4)],'sticker-pack-publisher':_0x599db3[_0x316df7(0xc0)],'emojis':_0x599db3[_0x316df7(0x98)]?_0x599db3['categories']:['']},_0x411009=await Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3283ee=await Buffer[_0x316df7(0xa6)](JSON[_0x316df7(0xb1)](_0x3acf78),_0x316df7(0xb6)),_0xb67487=await Buffer[_0x316df7(0xb7)]([_0x411009,_0x3283ee]);return await _0xb67487[_0x316df7(0xc6)](_0x3283ee[_0x316df7(0xc2)],0xe,0x4),await _0xd09eea[_0x316df7(0x95)](_0x2ad785),fs[_0x316df7(0xb2)](_0x2ad785),_0xd09eea[_0x316df7(0x9a)]=_0xb67487,await _0xd09eea[_0x316df7(0xa1)](_0x4d3f7f),_0x4d3f7f;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExifWebp':writeExifWebp};
